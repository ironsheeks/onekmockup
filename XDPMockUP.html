import React, { useState } from 'react';
import { 
  LayoutDashboard, 
  Database, 
  Search, 
  Bot, 
  Activity, 
  Share2, 
  ShieldAlert, 
  FileBarChart, 
  Settings, 
  Users, 
  Bell, 
  Menu, 
  ChevronRight,
  ArrowUpRight,
  DollarSign,
  Plus,
  Filter,
  RefreshCw,
  MessageSquare,
  Globe,
  ShoppingBag,
  Send,
  Zap,
  Download,
  Calendar,
  PieChart as PieIcon
} from 'lucide-react';
import { 
  ResponsiveContainer, 
  AreaChart,
  Area,
  CartesianGrid,
  XAxis,
  YAxis,
  Tooltip,
  BarChart,
  Bar,
  Legend,
  PieChart,
  Pie,
  Cell
} from 'recharts';


// --- Mock Data for Executive Dashboard ---
const revenueTrend = [
  { month: 'Jan', revenue: 400000, impact: 240000 },
  { month: 'Feb', revenue: 300000, impact: 139800 },
  { month: 'Mar', revenue: 500000, impact: 380000 },
  { month: 'Apr', revenue: 450000, impact: 290000 },
  { month: 'May', revenue: 600000, impact: 450000 },
  { month: 'Jun', revenue: 750000, impact: 550000 },
];


// --- Mock Data for Reporting Suite ---
const reportingPerformance = [
  { date: 'Dec 01', spend: 4500, revenue: 18000 },
  { date: 'Dec 05', spend: 5200, revenue: 22000 },
  { date: 'Dec 10', spend: 4800, revenue: 21500 },
  { date: 'Dec 15', spend: 6100, revenue: 28000 },
  { date: 'Dec 20', spend: 5500, revenue: 25000 },
  { date: 'Dec 25', spend: 7000, revenue: 35000 },
  { date: 'Dec 30', spend: 6800, revenue: 31000 },
];


const channelDistribution = [
  { name: 'Google Ads', value: 45, color: '#3b82f6' },
  { name: 'Social', value: 25, color: '#8b5cf6' },
  { name: 'Email', value: 15, color: '#10b981' },
  { name: 'SMS', value: 10, color: '#f59e0b' },
  { name: 'Amazon', value: 5, color: '#ef4444' },
];


const detailedChannelData = [
  { channel: 'Google Ads', spend: '$145,200', revenue: '$580,800', roas: '4.0x', leads: '2,000', cpa: '$72.60', conversion: '12.5%' },
  { channel: 'Social (Meta/TT)', spend: '$82,000', revenue: '$246,000', roas: '3.0x', leads: '2,780', cpa: '$29.49', conversion: '8.2%' },
  { channel: 'Email Marketing', spend: '$12,500', revenue: '$120,000', roas: '9.6x', leads: '4,000', cpa: '$3.12', conversion: '24.1%' },
  { channel: 'SMS Campaigns', spend: '$8,400', revenue: '$95,000', roas: '11.3x', leads: '3,000', cpa: '$2.80', conversion: '18.5%' },
  { channel: 'Amazon Ads', spend: '$24,000', revenue: '$60,000', roas: '2.5x', leads: '1,890', cpa: '$12.69', conversion: '10.0%' },
];


// --- Components ---


const SidebarItem = ({ icon: Icon, label, active, onClick, isSpecial = false }) => (
  <button
    onClick={onClick}
    className={`w-full flex items-center gap-3 px-4 py-3 transition-colors duration-200 text-sm font-medium
      ${isSpecial 
        ? 'bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700 mt-6 rounded-lg shadow-lg mx-2 w-auto' 
        : active 
          ? 'bg-slate-800 text-blue-400 border-r-4 border-blue-400' 
          : 'text-slate-400 hover:bg-slate-800 hover:text-white'
      }`}
  >
    <Icon size={isSpecial ? 20 : 18} />
    <span>{label}</span>
  </button>
);


const TabButton = ({ label, active, onClick }) => (
  <button
    onClick={onClick}
    className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${
      active 
        ? 'border-blue-600 text-blue-600' 
        : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'
    }`}
  >
    {label}
  </button>
);


const StatCard = ({ title, value, subtext, trend, icon: Icon, trendColor = 'text-green-400', valueColor = 'text-slate-900' }) => (
  <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
    <div className="flex justify-between items-start mb-4">
      <div className="p-2 bg-slate-50 rounded-lg">
        {Icon && <Icon className="text-slate-600" size={24} />}
      </div>
      {trend && (
        <span className={`flex items-center text-xs font-medium px-2 py-1 rounded-full bg-slate-100 ${trendColor}`}>
          <ArrowUpRight size={12} className="mr-1" /> {trend}
        </span>
      )}
    </div>
    <h3 className="text-slate-500 text-sm font-medium uppercase tracking-wide">{title}</h3>
    <p className={`text-3xl font-bold mt-1 ${valueColor}`}>{value}</p>
    {subtext && <p className="text-slate-400 text-xs mt-2">{subtext}</p>}
  </div>
);


// --- Sub-Section Components based on PDF ---


const GSEOHubView = () => {
  const [activeTab, setActiveTab] = useState('SEO Center');
  
  const tasks = [
    { type: 'BLOG', title: '2026 Jeep Wrangler near Washington', date: '12/16/2025', status: 'Complete' },
    { type: 'GBP', title: '2026 Jeep Wrangler near Washington', date: '12/17/2025', status: 'Completed' },
    { type: 'Page', title: '2025 Ram 1500 Towing Capacity', date: '12/15/2025', status: 'Pending' },
  ];


  return (
    <div className="space-y-6 animate-in fade-in">
      <div className="border-b border-slate-200 flex gap-4">
        {['SEO Center', 'SEO Chat', 'Insights', 'Admin'].map(tab => (
           <TabButton key={tab} label={tab} active={activeTab === tab} onClick={() => setActiveTab(tab)} />
        ))}
      </div>


      {activeTab === 'SEO Center' && (
        <>
          <div className="flex justify-between items-center">
            <div>
              <h2 className="text-2xl font-bold text-slate-900">SEO Center</h2>
              <p className="text-slate-500">Manage SEO tasks, track progress, and implement optimization recommendations</p>
            </div>
            <div className="flex gap-2">
               <button className="flex items-center gap-2 px-4 py-2 bg-white border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50">
                 <RefreshCw size={16} /> Refresh
               </button>
               <button className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                 <Plus size={16} /> New Task
               </button>
            </div>
          </div>


          <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
             {/* Package Progress Cards */}
             <div className="p-5 bg-white rounded-xl border border-slate-200 shadow-sm">
                <h4 className="text-sm font-medium text-slate-500 mb-2">Pages</h4>
                <div className="flex items-end gap-2">
                   <span className="text-3xl font-bold text-slate-900">5/5</span>
                   <span className="text-xs text-green-600 font-medium mb-1">Complete</span>
                </div>
                <div className="w-full bg-slate-100 h-2 mt-3 rounded-full overflow-hidden">
                   <div className="bg-green-500 h-full w-full"></div>
                </div>
             </div>
             <div className="p-5 bg-white rounded-xl border border-slate-200 shadow-sm">
                <h4 className="text-sm font-medium text-slate-500 mb-2">Blogs</h4>
                <div className="flex items-end gap-2">
                   <span className="text-3xl font-bold text-slate-900">3/6</span>
                   <span className="text-xs text-blue-600 font-medium mb-1">In Progress</span>
                </div>
                <div className="w-full bg-slate-100 h-2 mt-3 rounded-full overflow-hidden">
                   <div className="bg-blue-500 h-full w-1/2"></div>
                </div>
             </div>
             <div className="p-5 bg-white rounded-xl border border-slate-200 shadow-sm">
                <h4 className="text-sm font-medium text-slate-500 mb-2">GBP Posts</h4>
                <div className="flex items-end gap-2">
                   <span className="text-3xl font-bold text-slate-900">7/12</span>
                </div>
                <div className="w-full bg-slate-100 h-2 mt-3 rounded-full overflow-hidden">
                   <div className="bg-purple-500 h-full w-[58%]"></div>
                </div>
             </div>
             <div className="p-5 bg-white rounded-xl border border-slate-200 shadow-sm">
                <h4 className="text-sm font-medium text-slate-500 mb-2">SEO/GEO Changes</h4>
                <div className="flex items-end gap-2">
                   <span className="text-3xl font-bold text-slate-900">5/10</span>
                </div>
                <div className="w-full bg-slate-100 h-2 mt-3 rounded-full overflow-hidden">
                   <div className="bg-orange-500 h-full w-1/2"></div>
                </div>
             </div>
          </div>


          <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
             <div className="p-4 border-b border-slate-200 flex justify-between items-center bg-slate-50">
                <div className="flex gap-3">
                   <button className="flex items-center gap-1 px-3 py-1.5 bg-white border border-slate-300 rounded text-sm text-slate-600">
                      <Filter size={14} /> Filter & Search
                   </button>
                </div>
                <span className="text-sm text-slate-500">December 2025</span>
             </div>
             <table className="w-full text-left text-sm">
                <thead className="bg-slate-50 text-slate-500 font-medium">
                   <tr>
                      <th className="px-6 py-3">Type</th>
                      <th className="px-6 py-3">Task Name</th>
                      <th className="px-6 py-3">Date</th>
                      <th className="px-6 py-3">Status</th>
                      <th className="px-6 py-3">Action</th>
                   </tr>
                </thead>
                <tbody className="divide-y divide-slate-100">
                   {tasks.map((task, i) => (
                      <tr key={i} className="hover:bg-slate-50">
                         <td className="px-6 py-4">
                            <span className={`px-2 py-1 rounded-full text-xs font-bold ${
                               task.type === 'BLOG' ? 'bg-blue-100 text-blue-700' :
                               task.type === 'GBP' ? 'bg-purple-100 text-purple-700' : 'bg-green-100 text-green-700'
                            }`}>
                               {task.type}
                            </span>
                         </td>
                         <td className="px-6 py-4 font-medium text-slate-900">{task.title}</td>
                         <td className="px-6 py-4 text-slate-500">{task.date}</td>
                         <td className="px-6 py-4 text-green-600 font-medium">{task.status}</td>
                         <td className="px-6 py-4">
                            <button className="text-blue-600 hover:underline">View Details</button>
                         </td>
                      </tr>
                   ))}
                </tbody>
             </table>
          </div>
        </>
      )}
    </div>
  );
};


const VeeOttoView = () => {
  const vehicles = [
     { stock: 'PMCTK7368A', name: '2018 Jaguar F-PACE 20d Prestige', vin: '...293288', date: 'Dec 17, 2025 07:33 PM', status: 'No Build Data' },
     { stock: 'MR26031A', name: '2024 Ford F-150 Lightning Flash', vin: '...G27859', date: 'Dec 17, 2025 07:24 PM', status: 'Completed' },
  ];


  return (
    <div className="space-y-6 animate-in fade-in">
       <div className="flex justify-between items-center">
          <h2 className="text-2xl font-bold text-slate-900">VeeOtto Dashboard</h2>
          <div className="flex gap-2 text-sm text-slate-500 bg-white px-3 py-1.5 rounded-lg border border-slate-200">
             <span>Current Range: This Month (2025-12-01 to 2025-12-31)</span>
          </div>
       </div>


       {/* Top Stats */}
       <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div className="bg-slate-900 text-white p-5 rounded-xl shadow-lg">
             <div className="text-slate-400 text-xs font-bold uppercase mb-1">Total Vehicles</div>
             <div className="text-3xl font-bold">4,232</div>
          </div>
          <div className="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
             <div className="text-slate-500 text-xs font-bold uppercase mb-1">Descriptions Updated</div>
             <div className="text-3xl font-bold text-slate-900">2,919</div>
          </div>
          <div className="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
             <div className="text-slate-500 text-xs font-bold uppercase mb-1">Features Marked</div>
             <div className="text-3xl font-bold text-slate-900">19,125</div>
          </div>
          <div className="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
             <div className="text-slate-500 text-xs font-bold uppercase mb-1">Time Saved</div>
             <div className="text-3xl font-bold text-slate-900">767 <span className="text-sm font-normal text-slate-500">hours</span></div>
          </div>
       </div>


       {/* Automation Impact */}
       <div>
          <h3 className="text-lg font-bold text-slate-900 mb-4 uppercase text-sm tracking-wider">Automation Impact (Book Value Changes)</h3>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
             <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                <div className="text-slate-500 font-medium mb-2">Black Book</div>
                <div className="text-2xl font-bold text-green-500">+$1,305,237</div>
             </div>
             <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                <div className="text-slate-500 font-medium mb-2">KBB.com</div>
                <div className="text-2xl font-bold text-green-500">+$761,816</div>
             </div>
             <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                <div className="text-slate-500 font-medium mb-2">J.D. Power</div>
                <div className="text-2xl font-bold text-green-500">+$418,765</div>
             </div>
          </div>
       </div>


       {/* Vehicle Table */}
       <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
          <div className="p-4 border-b border-slate-200 bg-slate-50 flex justify-between">
             <div className="relative">
                <Search className="absolute left-3 top-2.5 text-slate-400" size={16} />
                <input type="text" placeholder="Search by stock number..." className="pl-9 pr-4 py-2 border border-slate-300 rounded-lg text-sm w-64 focus:outline-none focus:ring-2 focus:ring-blue-500" />
             </div>
             <button className="px-4 py-2 text-sm text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50">Export CSV</button>
          </div>
          <table className="w-full text-left text-sm">
             <thead className="bg-slate-100 text-slate-500 font-semibold uppercase text-xs">
                <tr>
                   <th className="px-6 py-3">Vehicle</th>
                   <th className="px-6 py-3">Stock #</th>
                   <th className="px-6 py-3">Processed At</th>
                   <th className="px-6 py-3">Status</th>
                </tr>
             </thead>
             <tbody className="divide-y divide-slate-100">
                {vehicles.map((v, i) => (
                   <tr key={i} className="hover:bg-slate-50">
                      <td className="px-6 py-4">
                         <div className="font-medium text-slate-900">{v.name}</div>
                         <div className="text-xs text-slate-400">{v.vin}</div>
                      </td>
                      <td className="px-6 py-4 text-slate-600">{v.stock}</td>
                      <td className="px-6 py-4 text-slate-500">{v.date}</td>
                      <td className="px-6 py-4">
                         <span className={`px-2 py-1 rounded text-xs font-medium ${v.status === 'Completed' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'}`}>
                            {v.status}
                         </span>
                      </td>
                   </tr>
                ))}
             </tbody>
          </table>
       </div>
    </div>
  );
};


const KeelConnectView = () => {
  const [activeTab, setActiveTab] = useState('Dashboard');
  return (
    <div className="space-y-6 animate-in fade-in">
       <div className="flex justify-between items-center mb-2">
          <div className="flex gap-4 border-b border-transparent">
             {['Dashboard', 'Campaigns'].map(tab => (
                <button
                   key={tab}
                   onClick={() => setActiveTab(tab)}
                   className={`text-lg font-bold pb-2 ${activeTab === tab ? 'text-slate-900 border-b-2 border-slate-900' : 'text-slate-400'}`}
                >
                   {tab}
                </button>
             ))}
          </div>
          <div className="text-sm font-medium text-slate-500">Welcome back, Josh!</div>
       </div>


       {activeTab === 'Dashboard' && (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
             <div className="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-center items-center text-center h-64">
                <div className="mb-4 p-4 bg-blue-50 rounded-full text-blue-600"><Zap size={32} /></div>
                <div className="text-4xl font-extrabold text-slate-900 mb-1">132</div>
                <div className="text-sm font-bold text-slate-500 uppercase tracking-wide">Total Campaigns</div>
                <div className="text-xs text-green-500 font-medium mt-1">11 active</div>
             </div>
             <div className="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-center items-center text-center h-64">
                <div className="mb-4 p-4 bg-purple-50 rounded-full text-purple-600"><Users size={32} /></div>
                <div className="text-4xl font-extrabold text-slate-900 mb-1">15,215</div>
                <div className="text-sm font-bold text-slate-500 uppercase tracking-wide">Total Leads</div>
                <div className="text-xs text-slate-400 mt-1">Across all campaigns</div>
             </div>
             <div className="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-center items-center text-center h-64">
                <div className="mb-4 p-4 bg-orange-50 rounded-full text-orange-600"><MessageSquare size={32} /></div>
                <div className="text-4xl font-extrabold text-slate-900 mb-1">14,913</div>
                <div className="text-sm font-bold text-slate-500 uppercase tracking-wide">Conversations</div>
                <div className="text-xs text-slate-400 mt-1">Total active threads</div>
             </div>
             <div className="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-center items-center text-center h-64">
                <div className="mb-4 p-4 bg-green-50 rounded-full text-green-600"><Send size={32} /></div>
                <div className="text-4xl font-extrabold text-slate-900 mb-1">23,499</div>
                <div className="text-sm font-bold text-slate-500 uppercase tracking-wide">Messages Sent</div>
                <div className="text-xs text-slate-400 mt-1">Email & SMS combined</div>
             </div>
          </div>
       )}
    </div>
  );
};


const WatchdogView = () => {
  const [activeTab, setActiveTab] = useState('Chat');
  return (
     <div className="h-[calc(100vh-140px)] flex flex-col animate-in fade-in">
        <div className="flex gap-6 border-b border-slate-200 mb-4 px-2">
           {['Dashboard', 'Chat', 'Work', 'Settings'].map(tab => (
              <button 
                 key={tab}
                 onClick={() => setActiveTab(tab)}
                 className={`pb-3 text-sm font-medium ${activeTab === tab ? 'text-blue-600 border-b-2 border-blue-600' : 'text-slate-500'}`}
              >
                 {tab}
              </button>
           ))}
        </div>


        {activeTab === 'Chat' && (
           <div className="flex-1 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden">
              <div className="flex-1 p-8 flex flex-col items-center justify-center text-center max-w-2xl mx-auto w-full">
                 <div className="w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center text-white mb-6 shadow-lg">
                    <ShieldAlert size={32} />
                 </div>
                 <h2 className="text-2xl font-bold text-slate-900 mb-2">Keel Watchdog Assistant</h2>
                 <div className="px-3 py-1 bg-slate-100 rounded-full text-xs font-bold text-slate-600 uppercase tracking-wider mb-6">Facts Only</div>
                 <p className="text-slate-500 mb-8 max-w-md">Your data reporter for paid search analytics at ABC Motors. I provide metrics, trend analysis, and citations without strategic advice.</p>
                 
                 <div className="grid grid-cols-1 md:grid-cols-2 gap-4 w-full mb-8">
                    <button className="p-4 bg-slate-50 border border-slate-200 rounded-xl text-left text-sm text-slate-700 hover:bg-blue-50 hover:border-blue-200 transition-colors">
                       What is my CPC trend for the last 60 days?
                    </button>
                    <button className="p-4 bg-slate-50 border border-slate-200 rounded-xl text-left text-sm text-slate-700 hover:bg-blue-50 hover:border-blue-200 transition-colors">
                       How many conversions did I get from Meta last month?
                    </button>
                    <button className="p-4 bg-slate-50 border border-slate-200 rounded-xl text-left text-sm text-slate-700 hover:bg-blue-50 hover:border-blue-200 transition-colors">
                       Which days had the highest spend in the last 30 days?
                    </button>
                    <button className="p-4 bg-slate-50 border border-slate-200 rounded-xl text-left text-sm text-slate-700 hover:bg-blue-50 hover:border-blue-200 transition-colors">
                       Compare Google Ads clicks vs conversions this week.
                    </button>
                 </div>
              </div>
              <div className="p-6 border-t border-slate-100 bg-slate-50">
                 <div className="relative max-w-3xl mx-auto">
                    <input 
                       type="text" 
                       placeholder="Ask about metrics, trends, or comparisons (facts only)..." 
                       className="w-full pl-6 pr-12 py-4 rounded-full border border-slate-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                    <button className="absolute right-3 top-3 p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700">
                       <ArrowUpRight size={18} />
                    </button>
                 </div>
              </div>
           </div>
        )}
     </div>
  );
};


const GSEMAssistantView = () => {
   return (
      <div className="flex flex-col items-center justify-center min-h-[600px] bg-gradient-to-b from-white to-slate-50 rounded-2xl border border-slate-200 text-center p-8 animate-in fade-in">
         <div className="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-8">
            <Globe size={40} className="text-blue-600" />
         </div>
         <h2 className="text-4xl font-extrabold text-slate-900 mb-4">GSEM Assistant</h2>
         <p className="text-xl text-slate-600 mb-2">Google Ads Management for Automotive Dealerships</p>
         <p className="text-slate-500 max-w-lg mb-10">AI-powered insights and optimization for your Google Ads campaigns. Connect your accounts, chat with AI, and grow your dealership.</p>
         <div className="flex gap-4">
            <button className="px-8 py-3 bg-blue-600 text-white font-bold rounded-lg shadow-lg hover:bg-blue-700 transition-colors">
               Start Free Trial →
            </button>
            <button className="px-8 py-3 bg-white text-slate-700 font-bold border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors">
               Watch Demo
            </button>
         </div>
      </div>
   );
};


const ReportingSuiteView = () => {
  return (
    <div className="space-y-6 animate-in fade-in">
       {/* Header Controls */}
       <div className="flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
          <div>
            <h2 className="text-xl font-bold text-slate-900">Campaign Performance</h2>
            <p className="text-sm text-slate-500">Cross-channel marketing analytics and ROI tracking</p>
          </div>
          <div className="flex gap-3">
             <button className="flex items-center gap-2 px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-100">
                <Calendar size={16} /> Last 30 Days
             </button>
             <button className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700">
                <Download size={16} /> Export Report
             </button>
          </div>
       </div>


       {/* Top Metrics Row */}
       <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <StatCard 
            title="Total Ad Spend" 
            value="$272,100" 
            subtext="All Channels" 
            trend="+12% vs last mo" 
            icon={DollarSign} 
            trendColor="text-red-500" // Red because spend increased (context dependent)
          />
          <StatCard 
            title="Total Revenue Generated" 
            value="$1,101,800" 
            subtext="Attributed Sales" 
            trend="+24.5%" 
            icon={Activity} 
          />
          <StatCard 
            title="Blended ROAS" 
            value="4.05x" 
            subtext="Return on Ad Spend" 
            trend="+0.4x" 
            icon={PieIcon} 
            trendColor="text-blue-500"
          />
          <StatCard 
            title="Cost Per Lead (CPA)" 
            value="$19.87" 
            subtext="Average across channels" 
            trend="-5.2%" 
            icon={Users} 
            trendColor="text-green-500" // Green because cost went down
          />
       </div>


       {/* Main Visualization Row */}
       <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          
          {/* Spend vs Revenue Trend */}
          <div className="lg:col-span-2 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
             <h3 className="text-lg font-bold text-slate-900 mb-6">Spend vs. Revenue Trend</h3>
             <div className="h-80">
                <ResponsiveContainer width="100%" height="100%">
                   <AreaChart data={reportingPerformance}>
                      <defs>
                         <linearGradient id="colorRevenue" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="5%" stopColor="#3b82f6" stopOpacity={0.1}/>
                            <stop offset="95%" stopColor="#3b82f6" stopOpacity={0}/>
                         </linearGradient>
                      </defs>
                      <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#f1f5f9" />
                      <XAxis dataKey="date" axisLine={false} tickLine={false} tick={{fill: '#64748b', fontSize: 12}} />
                      <YAxis axisLine={false} tickLine={false} tick={{fill: '#64748b', fontSize: 12}} />
                      <Tooltip contentStyle={{borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1)'}} />
                      <Legend />
                      <Area type="monotone" dataKey="revenue" name="Revenue" stroke="#3b82f6" fill="url(#colorRevenue)" strokeWidth={3} />
                      <Area type="monotone" dataKey="spend" name="Ad Spend" stroke="#ef4444" fill="none" strokeWidth={2} strokeDasharray="5 5" />
                   </AreaChart>
                </ResponsiveContainer>
             </div>
          </div>


          {/* Channel Distribution */}
          <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col">
             <h3 className="text-lg font-bold text-slate-900 mb-2">Spend Allocation</h3>
             <p className="text-sm text-slate-500 mb-6">Budget distribution by channel</p>
             <div className="flex-1 min-h-[250px] relative">
                <ResponsiveContainer width="100%" height="100%">
                   <PieChart>
                      <Pie
                         data={channelDistribution}
                         cx="50%"
                         cy="50%"
                         innerRadius={60}
                         outerRadius={80}
                         paddingAngle={5}
                         dataKey="value"
                      >
                         {channelDistribution.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={entry.color} />
                         ))}
                      </Pie>
                      <Tooltip />
                   </PieChart>
                </ResponsiveContainer>
                {/* Center Text Overlay */}
                <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                   <div className="text-center">
                      <span className="block text-2xl font-bold text-slate-900">100%</span>
                      <span className="text-xs text-slate-500">Allocation</span>
                   </div>
                </div>
             </div>
             <div className="space-y-3 mt-4">
                {channelDistribution.map((item, i) => (
                   <div key={i} className="flex items-center justify-between text-sm">
                      <div className="flex items-center gap-2">
                         <div className="w-3 h-3 rounded-full" style={{backgroundColor: item.color}}></div>
                         <span className="text-slate-600">{item.name}</span>
                      </div>
                      <span className="font-medium text-slate-900">{item.value}%</span>
                   </div>
                ))}
             </div>
          </div>
       </div>


       {/* Detailed Table */}
       <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
          <div className="p-4 border-b border-slate-200 bg-slate-50">
             <h3 className="font-bold text-slate-900">Channel Efficiency Report</h3>
          </div>
          <div className="overflow-x-auto">
             <table className="w-full text-left text-sm">
                <thead className="bg-white text-slate-500 border-b border-slate-100 font-semibold">
                   <tr>
                      <th className="px-6 py-4">Channel</th>
                      <th className="px-6 py-4">Spend</th>
                      <th className="px-6 py-4">Revenue</th>
                      <th className="px-6 py-4">ROAS</th>
                      <th className="px-6 py-4">Leads</th>
                      <th className="px-6 py-4">CPA</th>
                      <th className="px-6 py-4">Conv. Rate</th>
                   </tr>
                </thead>
                <tbody className="divide-y divide-slate-100">
                   {detailedChannelData.map((row, i) => (
                      <tr key={i} className="hover:bg-slate-50 transition-colors">
                         <td className="px-6 py-4 font-medium text-slate-900">{row.channel}</td>
                         <td className="px-6 py-4 text-slate-600">{row.spend}</td>
                         <td className="px-6 py-4 text-slate-900 font-semibold">{row.revenue}</td>
                         <td className="px-6 py-4">
                            <span className={`px-2 py-1 rounded-full text-xs font-bold ${
                               parseFloat(row.roas) > 4 ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'
                            }`}>
                               {row.roas}
                            </span>
                         </td>
                         <td className="px-6 py-4 text-slate-600">{row.leads}</td>
                         <td className="px-6 py-4 text-slate-600">{row.cpa}</td>
                         <td className="px-6 py-4 text-slate-600">{row.conversion}</td>
                      </tr>
                   ))}
                </tbody>
             </table>
          </div>
       </div>
    </div>
  );
};


// --- Main Application ---


export default function OneKeelXDP_v2() {
  const [activeSection, setActiveSection] = useState('Dashboard');
  const [sidebarOpen, setSidebarOpen] = useState(true);


  const getHeaderTitle = () => {
    switch(activeSection) {
       case 'Dashboard': return 'Executive Overview';
       case 'GSEO': return 'GSEO Hub';
       case 'VeeOtto': return 'VeeOtto Automation';
       case 'Keel Connect': return 'KeelConnect';
       case 'Keel Watchdog': return 'Keel Watchdog';
       case 'GSEM': return 'GSEM Assistant';
       case 'Reporting Suite': return 'Reporting Suite';
       default: return activeSection;
    }
  };


  const renderContent = () => {
    switch (activeSection) {
      case 'Dashboard':
        return (
          <div className="space-y-6 animate-in fade-in">
            {/* Executive Dashboard Content (Same as V1 but concise) */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
               <StatCard title="Total Revenue Impact" value="$3.4M" subtext="Attributed to XDP + AI" trend="+18.2%" icon={DollarSign} />
               <StatCard title="Data Records Ingested" value="61.2M" subtext="Identity Graph + CRM + DMS" trend="+2.4M" icon={Database} trendColor="text-blue-500" />
               <StatCard title="AI Leads Engaged" value="8,942" subtext="Last 30 Days" trend="+45%" icon={Bot} trendColor="text-purple-500" />
               <StatCard title="Active Campaigns" value="14" subtext="Across 5 Channels" trend="Stable" icon={Activity} trendColor="text-slate-500" />
            </div>
            <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                <h3 className="text-lg font-bold text-slate-900 mb-4">Revenue Impact Analysis</h3>
                <div className="h-72">
                  <ResponsiveContainer width="100%" height="100%">
                    <AreaChart data={revenueTrend}>
                      <defs>
                        <linearGradient id="colorImpact" x1="0" y1="0" x2="0" y2="1">
                          <stop offset="5%" stopColor="#3b82f6" stopOpacity={0.2}/>
                          <stop offset="95%" stopColor="#3b82f6" stopOpacity={0}/>
                        </linearGradient>
                      </defs>
                      <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#e2e8f0" />
                      <XAxis dataKey="month" axisLine={false} tickLine={false} tick={{fill: '#64748b'}} />
                      <YAxis axisLine={false} tickLine={false} tick={{fill: '#64748b'}} />
                      <Tooltip />
                      <Area type="monotone" dataKey="impact" stroke="#3b82f6" strokeWidth={3} fillOpacity={1} fill="url(#colorImpact)" />
                    </AreaChart>
                  </ResponsiveContainer>
                </div>
            </div>
          </div>
        );
      case 'GSEO': return <GSEOHubView />;
      case 'VeeOtto': return <VeeOttoView />;
      case 'Keel Connect': return <KeelConnectView />;
      case 'Keel Watchdog': return <WatchdogView />;
      case 'GSEM': return <GSEMAssistantView />;
      case 'Reporting Suite': return <ReportingSuiteView />;
      default:
        return (
          <div className="flex flex-col items-center justify-center min-h-[400px] text-slate-400">
             <Settings size={48} className="mb-4 opacity-50" />
             <h2 className="text-xl font-medium">{activeSection} Module</h2>
             <p className="text-sm">Work in progress</p>
          </div>
        );
    }
  };


  return (
    <div className="min-h-screen bg-slate-50 font-sans flex text-slate-900">
      
      {/* Sidebar */}
      <aside className={`fixed inset-y-0 left-0 z-50 bg-[#0f172a] text-slate-300 w-64 transition-transform duration-300 ease-in-out flex flex-col ${sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}`}>
        <div className="h-16 flex items-center px-6 border-b border-slate-800 bg-[#0b1120]">
            <div className="flex items-center gap-2">
                <div className="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-xl">K</div>
                <div>
                    <span className="text-white font-bold text-lg tracking-tight block leading-none">ONE KEEL</span>
                    <span className="text-xs text-blue-400 font-medium tracking-widest">XDP PLATFORM</span>
                </div>
            </div>
        </div>


        <nav className="flex-1 overflow-y-auto py-6 space-y-1">
          <div className="px-4 mb-2 text-xs font-semibold text-slate-500 uppercase tracking-wider">Platform</div>
          <SidebarItem icon={LayoutDashboard} label="Dashboard" active={activeSection === 'Dashboard'} onClick={() => setActiveSection('Dashboard')} />
          <SidebarItem icon={Database} label="My Data" active={activeSection === 'My Data'} onClick={() => setActiveSection('My Data')} />
          
          <div className="px-4 mt-6 mb-2 text-xs font-semibold text-slate-500 uppercase tracking-wider">Products</div>
          <SidebarItem icon={Search} label="GSEO Hub" active={activeSection === 'GSEO'} onClick={() => setActiveSection('GSEO')} />
          <SidebarItem icon={ShoppingBag} label="VeeOtto" active={activeSection === 'VeeOtto'} onClick={() => setActiveSection('VeeOtto')} />
          <SidebarItem icon={Globe} label="GSEM Assistant" active={activeSection === 'GSEM'} onClick={() => setActiveSection('GSEM')} />
          <SidebarItem icon={Share2} label="Keel Connect" active={activeSection === 'Keel Connect'} onClick={() => setActiveSection('Keel Connect')} />
          <SidebarItem icon={ShieldAlert} label="Keel Watchdog" active={activeSection === 'Keel Watchdog'} onClick={() => setActiveSection('Keel Watchdog')} />
          <SidebarItem icon={FileBarChart} label="Reporting Suite" active={activeSection === 'Reporting Suite'} onClick={() => setActiveSection('Reporting Suite')} />


          <SidebarItem icon={Bot} label="AI Assistant" isSpecial={true} active={activeSection === 'AI Assistant'} onClick={() => setActiveSection('AI Assistant')} />
        </nav>


        <div className="p-4 border-t border-slate-800 bg-[#0b1120]">
            <div className="flex items-center gap-3">
                <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-cyan-400 flex items-center justify-center text-white font-bold shadow-md">JD</div>
                <div className="flex-1 overflow-hidden">
                    <p className="text-sm font-medium text-white truncate">John Doe</p>
                    <p className="text-xs text-slate-400 truncate">Admin • OneKeel</p>
                </div>
            </div>
        </div>
      </aside>


      {/* Content */}
      <div className="flex-1 lg:ml-64 flex flex-col min-h-screen">
        <header className="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 sticky top-0 z-40 shadow-sm">
            <div className="flex items-center gap-4">
                <button onClick={() => setSidebarOpen(!sidebarOpen)} className="lg:hidden p-2 text-slate-600 hover:bg-slate-100 rounded-md"><Menu size={24} /></button>
                <div className="flex items-center gap-2 text-sm text-slate-500">
                   <span>Platform</span> <ChevronRight size={14} /> <span className="font-semibold text-slate-900">{getHeaderTitle()}</span>
                </div>
            </div>
            <div className="flex items-center gap-4">
                <button className="p-2 text-slate-500 hover:bg-slate-100 rounded-full relative">
                    <Bell size={20} />
                    <span className="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white"></span>
                </button>
                <div className="h-8 w-px bg-slate-200 mx-2 hidden sm:block"></div>
                <div className="text-right hidden sm:block">
                    <p className="text-xs font-semibold text-slate-900">OneKeel Team</p>
                    <p className="text-[10px] text-slate-500">Enterprise Plan</p>
                </div>
            </div>
        </header>


        <main className="p-8 flex-1 overflow-x-hidden">
            <div className="max-w-7xl mx-auto">
                {renderContent()}
            </div>
        </main>
      </div>
    </div>
  );

}
